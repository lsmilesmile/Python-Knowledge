# 文件

> 导航栏
>
> - 打开文件
> - 基本文件方法
> - 对文件内容进行迭代
> - StringIO函数
> - 序列化与反序列化



## 1 - 打开文件

Python中打开文件用open方法:

- 基本语法：**open(file_name, \[, access_mode][, buffering])**

- 参数：

  - file_name：包含要访问的文件名称的字符串值；

  - access_mode：打开文件的模式，如只读，写入和追加等。默认为只读（r）；、
  - buffering：
    1. 0：没有寄存；
    2. 1：访问文件有寄存；
    3. \>1：寄存区的缓冲大小；
    4. \<0：寄存去的缓冲大小就是系统默认值。

- 返回值：open函数返回一个File（文件）对象。

- 示例：

  ```Python
  path = 'd:/test.txt'
  f_name = open(path)
  print(f_name.name)
  
  """
  结果
  d:/test.txt
  """
  ```

**补充：文件路径**

- 绝对路径：总是从根文件夹开始；
- 相对路径：相对于程序当前工作目录的路径。



### 1.1 打开文件的模式

| 模式 |                             描述                             |
| :--: | :----------------------------------------------------------: |
|  r   | 以**只读**的方式打开文件。文件的指针放在文件的开头，这是**默认模式** |
|  rb  | 以**二进制格式**打开文件用于**只读**。文件指针在文件开头，这是**默认模式** |
|  r+  |        打开一个文件用于**读写**，文件的指针在文件开头        |
| rb+  | 以**二进制格式**打开一个文件用于**读写**，文件的指针会放在文件的开头 |
|  w   | 打开一个文件**只用于写入**。如果文件已经存在就将其覆盖；否则就创建新文件 |
|  wb  | 以**二进制格式**打开一个文件**只用于写入**。如果文件存在就将其覆盖；否则创建 |
|  w+  |  打开一个文件用于**读写**。如果文件存在就将其覆盖；否则创建  |
| wb+  | 以**二进制格式**打开一个文件用于**读写**。如果文件存在就将其覆盖；否则创建 |
|  a   | 打开一个文件用于**追加**。如果文件存在，文件的指针就会放在文件的结尾。即新内容会被写在已有内容之后。如果文件不存在就创建新文件进行写入 |
|  ab  | 以**二进制格式**打开一个文件用于**追加**。如果文件存在，文件的指针就会放在文件的结尾。即新内容会被写在已有内容之后。如果文件不存在就创建新文件进行写入 |
|  a+  | 打开一个文件用于**读写**。如果文件存在文件的指针将会放在文件的结尾。即新内容会被写在已有内容之后。如果文件不存在就创建新文件进行写入 |
| ab+  | 以**二进制格式**打开一个文件用于**追加**。如果该文件已经存在，文件指针将会放在文件结尾；如果该文件不存在，创建新文件就用于读写。 |

### 1.2 缓冲

​	open函数的第三个参数是可选的，该函数控制文件的缓存。如果该参数赋值为0或者False，I/O(输入/输出)就是无缓存的。如果是1或Ture，I/O就是由缓存的。大于1 的整数就是缓存的大小（单位字节），-1或者小于0的整数代表使用默认的缓存大小。

## 2 - 基本文件方法

### 2.1 流

​	I/O编程中，Stream（流）是一个很重要的概念。可以把流想象成一个水管，数据就是水管里的水，但是只能单向流动。Input Stream就是数据从外面（磁盘、网络）流进内存，Output Stream就是数据从内存流到外面去。浏览网页时，浏览器和服务器之间至少需要建立两根水管，才能发送数据和接受数据。

### 2.2 读和写

open函数返回的是一个File对象，有了File对象就可以开始读取内容。

**相关方法**

- **read()**

  1. 描述：该方法从文件的开头开始读入，如果没有传入参数count，就会尝试尽可能多地读取内容，可能一直读到文件末尾。

  2. 语法形式：**fileobject.read([count])**

  3. 参数：

     count：是从已打开的文件中读取的字节计数。

  4. 代码：

     ```Python
     '''
     test.txt中的内容：
     hello
     felix
     nihao
     '''
     # 代码段1
     path = 'd:/test.txt'
     f_name = open(path, 'r')
     print(f_name.read(4))    # 第一次读取4个字节
     print(f_name.read(5))    # 第二次从第一次结束的地方继续读5个字节
     print(f_name.read(6))    # 第三次从第二次结束的地方继续读6个字节
     
     '''
     结果
     hell
     o
     fel
     ix
     nih
     '''
     
     #代码段2
     path = 'd:/test.txt'
     f_name = open(path, 'r')
     print(f_name.read())              #读取了全部内容
     '''
     结果
     hello
     felix
     nihao
     '''
     ```

     **注：打开文件，在文件未关闭的情况下是继上一次读的结束的位置继续读取的。并且换行也作为一个字符被当成是读取的内容。**



## 3 - 对文件内容进行迭代

## 4 - StringIO函数

## 5 - 序列化与反序列化